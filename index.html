<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Datepicker</title>
    <link rel="stylesheet" href="datepicker.css">
    <script src="node_modules/moment/moment.js"></script>
    <script src="datepicker.js"></script>
    <script>
      function filter(date) {
        return date.day() < 1 || date.day() > 5;
      }

      function openCallback() {
        console.log('open', this);
      }

      function closeCallback() {
        console.log('close', this);
      }

      function selectDateCallback(date) {
        console.log('select(moment(\''+date.format('YYYY-MM-DD')+'\'))', this);
      }

      document.addEventListener('DOMContentLoaded', function(event) {
        new Datepicker({
          input: document.querySelector('.with_input [name=date_field]'),
          min: moment().subtract(1, 'year'),
          max: moment().add(1, 'year'),
          filter: filter,
          onOpen: openCallback,
          onClose: closeCallback,
          onSelectDate: selectDateCallback
        });

        new Datepicker({
          input: document.querySelector('.with_display [name=date_field]'),
          display: document.querySelector('.with_display .display'),
          min: moment().subtract(1, 'year'),
          max: moment().add(1, 'year'),
          filter: filter,
          onOpen: openCallback,
          onClose: closeCallback,
          onSelectDate: selectDateCallback
        });

        new Datepicker({
          input: document.querySelector('.with_button [name=date_field]'),
          display: document.querySelector('.with_button .display'),
          button: document.querySelector('.with_button .opener'),
          min: moment().subtract(1, 'year'),
          max: moment().add(1, 'year'),
          filter: filter,
          onOpen: openCallback,
          onClose: closeCallback,
          onSelectDate: selectDateCallback
        });
      });
    </script>
  </head>
  <body>
    <form action="#" class="with_input">
      <p>
        <label>Select a Date:</label>
        <span class="datepicker-parent">
          <input name="date_field" type="text">
        </span>
      </p>
    </form>

    <form action="#" class="with_display">
      <input name="date_field" type="hidden">

      <p class="datepicker-parent">
        <span class="display">Date</span>
      </p>
    </form>

    <form action="#" class="with_button">
      <input name="date_field" type="hidden">

      <p class="datepicker-parent">
        <span class="display">Date</span>
        <button class="opener">Pick</button>
      </p>
    </form>
  </body>
</html>
